
## Effective Dart: Style Guide
é«˜è´¨é‡çš„ä»£ç çš„å‰ææ˜¯æœ‰è‰¯å¥½çš„ä»£ç é£æ ¼,ä¿æŒä¸€è‡´çš„å‘½åè§„åˆ™ã€ä»£ç é¡ºåºã€ä»¥åŠä»£ç æ ¼å¼åŒ–è§„åˆ™å¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥æ˜¯åŒä¸€äººå†™å‡ºæ¥çš„ã€‚åœ¨æ•´ä¸ªdartè¯­è¨€çš„ç”Ÿæ€ä¸­ä¿æŒä¸€è‡´çš„ä»£ç é£æ ¼,æœ‰åˆ©äºæˆ‘ä»¬äº’ç›¸å­¦ä¹ ä»¥åŠè´¡çŒ®ä»£ç ã€‚

1. **æ ‡è¯†ç¬¦å‘½å**  
    - [DO] [ç±»å‹å‘½åä½¿ç”¨å¤§å†™é©¼å³°é£æ ¼](#1-1)  
    - [DO] [åº“ä¸ªæºæ–‡ä»¶å‘½åä½¿ç”¨å°å†™åŠ ä¸‹åˆ’çº¿é£æ ¼](#1-2)  
    - [DO] [importå‰ç¼€å‘½åä½¿ç”¨å°å†™åŠ ä¸‹åˆ’çº¿é£æ ¼](#1-3)  
    - [DO] [å…¶ä»–å‘½åä½¿ç”¨å°å†™é©¼å³°é£æ ¼](#1-4)  
    - [PREFER] [å¸¸é‡å‘½åä½¿ç”¨å°å†™é©¼å³°é£æ ¼](#1-5)  
    - [DO]  [ç¼©ç•¥è¯å¤§å†™](#1-6)  
    - [DON'T] [ä¸è¦ä½¿ç”¨å‰ç¼€å­—ç¬¦](#1-7)  
2. **ä»£ç é¡ºåº** 
    - [DO] [å°†`dart:xx`å¯¼å…¥ä»£ç æ”¾åœ¨å…¶ä»–å¯¼å…¥ä¹‹å‰](#2-1)
    - [DO] [å°†`package:xx`å¯¼å…¥ä»£ç æ”¾åœ¨ç›¸å¯¹æ–‡ä»¶å¯¼å…¥ä¹‹å‰](#2-2)  
    - [PREFER] [å°†è‡ªå·±çš„åŒ…çš„å¼•å…¥ä»£ç æ”¾åœ¨å…¶ä»–ä¸‰æ–¹åŒ…å¼•å…¥ä¹‹å](#2-3)  
    - [DO] [å¯¼å‡ºä»£ç åº”è¯¥æ”¾åœ¨æ‰€æœ‰å¯¼å…¥ä»£ç ä¹‹å](#2-4) 
    - [DO] [åŒä¸€ç±»å¯¼å…¥ä»£ç é¡ºåºæ ¹æ®æ–‡ä»¶æˆ–è€…åŒ…åçš„é¦–å­—æ¯æ’åº](#2-5) 
3. **æ ¼å¼åŒ–**      
    - [DO] [ä½¿ç”¨`dartfmt`å·¥å…·æ ¼å¼åŒ–ä½ çš„ä»£ç ](#3-1)  
    - [CONSIDER] [ä¿®æ”¹ä½ çš„ä»£ç ä½¿ä¹‹å˜å¾—å¯¹æ ¼å¼åŒ–å·¥å…·å‹å¥½](#3-2)  
    - [AVOID] [å•è¡Œä»£ç ä¸è¶…è¿‡80ä¸ªå­—ç¬¦](#3-3)  
    - [DO] [ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹ä½ çš„æ§åˆ¶æµç»“æ„](#3-4)

### æ ‡è¯†ç¬¦å‘½å

#### åœ¨dartä¸­æœ‰ä¸‰ç§å‘½åæ–¹å¼
- å¤§å†™é©¼å³°å‘½å `UpperCamelCase`
- å°å†™é©¼å³°å‘½å `lowerCamelCase`
- å°å†™åŠ ä¸‹åˆ’çº¿å‘½å `lower_case_width_underscores`

<a name="1-1"></a>
#### [DO] ç±»å‹å‘½åä½¿ç”¨*å¤§å†™é©¼å³°å‘½å*
> ç±»ï¼Œæšä¸¾ï¼Œtypedefå’Œç±»å‹å‚æ•°åº”è¯¥å°†æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼ˆåŒ…æ‹¬ç¬¬ä¸€ä¸ªå•è¯ï¼‰å¹¶ä¸”ä¸ä½¿ç”¨ä»»ä½•åˆ†éš”ç¬¦
```dart
    class SliderMenu { ... }
    
    class HttpRequest { ... }
    
    typedef Predicate<T> = bool Function(T value);
```
> å½“ç±»è¢«ç”¨æ¥ä½œä¸ºå…ƒæ•°æ®æ³¨è§£æ—¶ä¹Ÿè¦ä½¿ç”¨*å¤§å†™é©¼å³°å‘½å*
```dart
    class Foo {
        const Foo([arg]);
    }

    @Foo(anArg)
    class A { ... }
    
    @Foo()
    class B { ... }
```
> å½“æ³¨è§£ç±»çš„æ„é€ å‡½æ•°ä¸éœ€è¦å‚æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨*å°å†™é©¼å³°å‘½å*çš„å¸¸é‡ä»£æ›¿
```dart
const foo = Foo();

@foo
class C { ... }
```
<a name="1-2"></a>
#### [DO] å¯¹åº“ã€åŒ…ã€ç›®å½•ä»¥åŠæºæ–‡ä»¶ä½¿ç”¨*ä¸‹åˆ’çº¿å‘½å*
> æŸäº›æ–‡ä»¶ç³»ç»Ÿçš„æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œæ‰€ä»¥å¾ˆå¤šé¡¹ç›®è¦æ±‚å°†æ–‡ä»¶åè®¾ç½®ä¸ºå°å†™ã€‚ä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºåˆ†å‰²ç¬¦å¯ä»¥ç¡®ä¿å³ä½¿åœ¨æœªæ¥dartè¯­è¨€æ”¯æŒ**symbolic imports**,ä¹‹å‰çš„å‘½åä¾æ—§æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å‘½åã€‚( Using underscores as the separator ensures that the name is still a valid Dart identifier, which may be helpful if the language later supports symbolic imports.)

```dart
    // good
    library peg_parser.source_scanner;

    import 'file_system.dart';
    import 'slider_menu.dart';

    // bad
    library pegparser.SourceScanner;

    import 'file-system.dart';
    import 'SliderMenu.dart';
```
<a name="1-3"></a>
#### [DO] å½“importåŒ…å¹¶å–åˆ«åæ—¶,åˆ«åéœ€ä½¿ç”¨*ä¸‹åˆ’çº¿å‘½å*

```dart
    // good
    import 'dart:math' as math;
    import 'package:ng_component' as ng_component;
    import 'package:js/js.dart' as js;

    //bad
    import 'dart:math' as Math;
    import 'package:ng_component' as ngComponent;
    import 'package:js/js.dart' as JS;
```
<a name="1-4"></a>
#### [DO] å…¶ä»–æƒ…å†µä½¿ç”¨*å°å†™é©¼å³°å‘½å*
> ç±»æˆå‘˜ï¼Œé¡¶çº§(å…¨å±€)å®šä¹‰ï¼Œå˜é‡ï¼Œå‚æ•°ï¼Œå‘½åå‚æ•°åº”è¯¥å¤§å†™é™¤ç¬¬ä¸€ä¸ªå•è¯å¤–çš„æ¯ä¸ªå•è¯ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨åˆ†éš”ç¬¦

```dart
    var item;

    HttpRequest httpRequest;

    void align(bool clearItems) {
        //...
    }
```
<a name="1-5"></a>
#### [PREFER] åœ¨ä»£ç ä¸­å®šä¹‰å¸¸é‡æ—¶ä½¿ç”¨*å°å†™é©¼å³°å‘½å*


```dart
    // good
    const pi = 3.14;
    const defaultTimeout = 4000;
    final urlScheme = RegExp('^([a-z]+):');

    class Dice {
        static final numberGenerator = Random();
    }

    // bad
    const PI = 3.14;
    const DefaultTimeout = 1000;
    final URL_SCHEME = RegExp('^([a-z]+):'); 

    class Dice {
        static final NUMBER_GENERATOR = Random();
    }
```

>Note:æˆ‘ä»¬æœ€åˆå¯¹å¸¸é‡ä½¿ç”¨Javaçš„SCREAMING_CAPSæ ·å¼ã€‚æˆ‘ä»¬æ”¹å˜çš„åŸå› å¦‚ä¸‹:
> 
> - SCREAMING_CAPSåœ¨å¾ˆå¤šæƒ…å†µä¸‹çœ‹èµ·æ¥å¾ˆç³Ÿç³•ï¼Œå°¤å…¶æ˜¯å¯¹äºCSSé¢œè‰²ä¹‹ç±»çš„ä¸œè¥¿æ¥è¯´ã€‚
>
> - å¸¸é‡ç»å¸¸è¢«æ›´æ”¹ä¸ºfinalçš„éconstå˜é‡ï¼Œè¿™å°±éœ€è¦æ›´æ”¹åç§°ã€‚
>
> - æšä¸¾ç±»å‹ä¸Šè‡ªåŠ¨å®šä¹‰çš„å€¼å±æ€§ä¸ºconstå’Œå°å†™ã€‚


<a name="1-6"></a>
#### [DO] ç¼©å†™è¯çš„é•¿åº¦åº”è¯¥è¶…è¿‡ä¸¤ä¸ªå­—æ¯ã€‚
> å¤§å†™çš„é¦–å­—æ¯ç¼©å†™å¯èƒ½å¾ˆéš¾è¯»æ‡‚ï¼Œè€Œå¤šä¸ªç›¸é‚»çš„é¦–å­—æ¯ç¼©å†™å¯èƒ½å¯¼è‡´åç§°æ¨¡ç³Šä¸æ¸…ã€‚ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªä»¥HTTPSFTPå¼€å¤´çš„åç§°ï¼Œå°±æ— æ³•åˆ¤æ–­å®ƒæ˜¯æŒ‡HTTPS FTPè¿˜æ˜¯HTTP SFTPã€‚
>
>ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œç¼©ç•¥è¯åº”è¯¥å’Œæ™®é€šå•è¯ä¸€æ ·é¦–å­—ç¬¦å¤§å†™ï¼Œè€Œç‰¹åˆ«çš„åŒå•è¯ç¼©å†™æ¯”å¦‚IOï¼ŒDBä¸æ”¹å˜å†™æ³•ã€‚

```dart
    // good
    HttpConnectionInfo
    uiHandler
    IOStream
    Id
    DB

    // bad
    HTTPConnection
    UiHandler
    IoStream
    ID
    Db
```
<a name="1-7"></a>
#### [DON'T] ä¸è¦å°†ç±»å‹ã€ä½œç”¨åŸŸç­‰å±æ€§å«ä¹‰ä½œä¸ºå‘½åå‰ç¼€å­—ç¬¦
>  [åŒˆç‰™åˆ©å‘½åæ³•](https://en.wikipedia.org/wiki/Hungarian_notation)ä»¥åŠå…¶ä»–ç±»ä¼¼çš„å‘½åæ–¹æ¡ˆå‡ºç°åœ¨BCPLæ—¶ä»£ï¼Œå½“æ—¶ç¼–è¯‘å™¨åœ¨å¸®åŠ©æ‚¨ç†è§£ä»£ç æ–¹é¢åšå¾—å¹¶ä¸å¤šã€‚å› ä¸ºDartå¯ä»¥å‘Šè¯‰æ‚¨å£°æ˜çš„ç±»å‹ã€èŒƒå›´ã€å¯å˜æ€§å’Œå…¶ä»–å±æ€§ï¼Œæ‰€ä»¥æ²¡æœ‰ç†ç”±å°†è¿™äº›å±æ€§ç¼–ç åˆ°æ ‡è¯†ç¬¦åç§°ä¸­ã€‚
```dart
    // good
    defaultTimeout
    // bad
    kDefaultTimeout
```
**[â¬† back to top](#top)**
## ä»£ç é¡ºåº ğŸ’§ 
> ä¸ºäº†ä½¿dartæ–‡ä»¶çš„å¤´éƒ¨ä¿æŒæ•´æ´ï¼Œæˆ‘ä»¬å¯¹äºä»£ç é¡ºåºæœ‰ä¸€äº›è§„å®šï¼Œæ¯ä¸€ä¸ªåŒºå—åº”è¯¥ç”¨ç©ºç™½è¡Œåˆ†å‰²å¼€
<a name="2-1"></a>
#### [DO] 'dart:' çš„å¼•å…¥ä»£ç æ”¾åœ¨å…¶ä»–å¼•å…¥ä¹‹å‰

```dart
    import 'dart:async';
    import 'dart:html';

    import 'package:bar/bar.dart';
```
<a name="2-2"></a>
#### [DO] 'package:' çš„å¼•å…¥ä»£ç æ”¾åœ¨ç›¸å¯¹è·¯å¾„å¼•å…¥ä¹‹å‰

```dart
    import 'package:bar/bar.dart';

    import '../util.dart';
```
<a name="2-3"></a>
#### [PREFER] å°†è‡ªå·±çš„åŒ…çš„å¼•å…¥ä»£ç æ”¾åœ¨å…¶ä»–ä¸‰æ–¹åŒ…å¼•å…¥ä¹‹å

```dart
    import 'package:bar/bar.dart';

    import 'package:my_package/util.dart';
```
<a name="2-4"></a>
#### [DO] å¯¼å‡ºä»£ç åº”è¯¥æ”¾åœ¨æ‰€æœ‰å¯¼å…¥ä»£ç ä¹‹å
```dart
    // good
    import 'src/error.dart';
    import 'src/foo.dart';

    export 'src/error.dart';

    // bad
    import 'src/error.dart';
    export 'src/error.dart';
    import 'src/foo.dart';
```
<a name="2-5"></a>
#### [DO] åŒä¸€ç±»å¯¼å…¥ä»£ç é¡ºåºæ ¹æ®æ–‡ä»¶æˆ–è€…åŒ…åçš„é¦–å­—æ¯æ’åº

```dart
    // good
    import 'package:bar/bar.dart';
    import 'package:foo/foo.dart';

    // bad
    import 'package:foo/foo.dart';  
    import 'package:bar/bar.dart';
```
**[â¬† back to top](#top)**
## ä»£ç æ ¼å¼åŒ– ğŸ”¨ 
> å’Œå¤§å¤šæ•°è¯­è¨€ä¸€æ ·ï¼ŒDartç¼–è¯‘å™¨ä¼šå¿½ç•¥ä»£ç ä¸­çš„ç©ºæ ¼,ç„¶è€Œäººç±»ä¸ä¼šã€‚æ‹¥æœ‰ä¸€è‡´çš„ç©ºç™½è¡Œé£æ ¼å¯ä»¥è®©äººåœ¨é˜…è¯»ä»£ç æ—¶å€™åƒç¼–è¯‘å™¨ä¸€æ ·é«˜æ•ˆã€‚

<a name="3-1"></a>
#### [DO] ä½¿ç”¨dartfmtå·¥å…·æ ¼å¼åŒ–ä½ çš„ä»£ç 
> æ ¼å¼åŒ–ä»£ç æ˜¯ä¸€é¡¹å¾ˆæ— èŠçš„å·¥ä½œï¼Œåœ¨é‡æ„æ—¶ç‰¹åˆ«è€—è´¹æ—¶é—´ã€‚å¹¸è¿çš„æ˜¯ç°åœ¨ä½ ä¸å¿…ä¸ºæ­¤æ‹…å¿ƒï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–ä»£ç æ ¼å¼åŒ–å·¥å…·å«åš[dartfmt](https://github.com/dart-lang/dart_style) ğŸ”— æ¥æ›¿ä»£äººå·¥å¤„ç†ã€‚

>ä¸‹é¢çš„ä¸€äº›æ ¼å¼åŒ–æŒ‡å¯¼æ˜¯ä¸ºäº†è§£å†³ä¸€äº›dartfmtå·¥å…·ä¸èƒ½æ›¿ä»£ä½ (æ‰‹åŠ¨)è§£å†³çš„é—®é¢˜ã€‚
<a name="3-2"></a>
#### [CONSIDER] ä¿®æ”¹ä½ çš„ä»£ç ä½¿ä¹‹å¯¹æ ¼å¼åŒ–å¤„ç†æ›´å‹å¥½
>æ ¼å¼åŒ–å·¥å…·ä¼šå°½åŠ›è€Œä¸ºçš„æ ¼å¼åŒ–ä½ çš„ä»£ç ï¼Œä½†æ˜¯å®ƒæ— æ³•åˆ›é€ å¥‡è¿¹ã€‚å¦‚æœä½ çš„ä»£ç æœ‰å¾ˆé•¿çš„æ ‡è¯†ç¬¦ï¼Œæˆ–è€…å¾ˆæ·±å±‚çš„åµŒå¥—ï¼Œä¸åŒç±»å‹çš„è¿ç®—ç¬¦å·æ··åˆç­‰ç­‰ï¼Œæ ¼å¼åŒ–åçš„è¾“å‡ºä»£ç ä¾ç„¶éš¾ä»¥é˜…è¯»ã€‚

>è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·é‡æ„æˆ–è€…ç®€åŒ–ä½ çš„ä»£ç ã€‚æ¨èä½ ç¼©çŸ­å˜é‡åæˆ–è€…å°†è¡¨è¾¾å¼èµ‹å€¼ç»™ä¸€ä¸ªæ–°çš„å˜é‡ã€‚æ¢å¥è¯è¯´ï¼Œå°½å¯èƒ½çš„æé«˜ä½ çš„ä»£ç çš„å¯è¯»æ€§ã€‚å°†dartfmtè§†ä¸ºä½ çš„åˆä½œä¼™ä¼´ï¼Œåˆä½œäº§å‡ºæ¼‚äº®çš„ä»£ç ã€‚
<a name="3-3"></a>
#### [AVOID] å•è¡Œä»£ç ä¸è¦è¶…è¿‡80ä¸ªå­—ç¬¦
>å¯è¯»æ€§ç ”ç©¶è¡¨æ˜é•¿è¡Œæ–‡å­—æ›´éš¾é˜…è¯»ï¼Œå› ä¸ºä½ çš„è§†çº¿éœ€è¦ä»é•¿è¡Œçš„è¡Œé¦–ç§»åŠ¨åˆ°è¡Œå°¾ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŠ¥çº¸æˆ–è€…æ‚å¿—ä½¿ç”¨å¤šè¡Œæ–‡å­—æ¥æ‰¿è½½å†…å®¹ã€‚

>å¦‚æœä½ å‘ç°ä½ çš„ä¸€è¡Œä»£ç å°†è¦è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬çš„ç»éªŒæ˜¯ä½ çš„ä»£ç å¯èƒ½è¿‡äºå†—é•¿éœ€è¦å‹ç¼©ä¸€ç‚¹ã€‚æ¯”è¾ƒå¯èƒ½çš„åŸå› æ˜¯ä½ ä½¿ç”¨äº†è¶…é•¿çš„ç±»åã€‚è¿™æ—¶å€™ä½ åº”è¯¥é—®è‡ªå·±ç±»åä¸­çš„æ¯ä¸ªå•è¯æ˜¯å¦éƒ½æœ‰ç‰¹æ®Šçš„å«ä¹‰æˆ–è€…é˜²æ­¢ä¸å…¶ä»–ç±»çš„æ„ä¹‰å‘ç”Ÿå†²çªï¼Œå¦‚æœå¯ä»¥è€ƒè™‘çœç•¥å®ƒã€‚

>è¯·æ³¨æ„dartfmtä¼šä¸ºä½ å®Œæˆ99%çš„å·¥ä½œï¼Œä½†æ˜¯æœ€å1%çš„å·¥ä½œéœ€è¦ä½ æ¥å®Œæˆã€‚æ¯”å¦‚å°†stringå­—ç¬¦é™åˆ¶åœ¨80ä¸ªä»¥å†…è¿™ç§å·¥ä½œéœ€è¦ä½ è‡ªå·±æ¥å®Œæˆã€‚

>æˆ‘ä»¬å¯¹URLå’Œæ–‡ä»¶è·¯å¾„åšäº†å¤„ç†ï¼Œå½“è¿™äº›å‡ºç°åœ¨æ³¨é‡Šæˆ–è€…å­—ç¬¦ä¸²ï¼ˆé€šå¸¸æ˜¯importhå’Œexportï¼‰ä¸­å³ä½¿è¶…å‡ºé™åˆ¶æˆ‘ä»¬ä¹Ÿä¼šä¿ç•™æˆä¸€è¡Œï¼Œè¿™æ ·æ–¹ä¾¿æœç´¢ç»™å®šè·¯å¾„çš„æºæ–‡ä»¶ã€‚
<a name="3-4"></a>
#### [DO] ä½¿ç”¨å¤§æ‹¬å·åŒ…ä½æ‰€æœ‰æ§åˆ¶æµç»“æ„
> è¿™æ ·åšå¯ä»¥é¿å…æ‚¬ç©ºelseé—®é¢˜

```dart
    // good
    if (isWeekDay) {
        print('I am verhappy');
    } else {
        print('Holy shit');
    }

    // bad 
    if (overflowChars != other.overflowChars)
        return overflowChars < other.overflowChars;
```
>ä¸‹é¢æ˜¯å¯¹äºæ§åˆ¶æµä»£ç é£æ ¼çš„å»ºè®®

```dart
    // good
    if (arg == null) return defaultValue;

    // good
    if (overflowChars != other.overflowChars) {
        return overflowChars < other.overflowChars;
    }

    // bad 
    if (overflowChars != other.overflowChars)
        return overflowChars < other.overflowChars;
```
**[â¬† back to top](#top)**
#### [DO] ç±»å‹å‘½åä½¿ç”¨*å¤§å†™é©¼å³°å‘½å*
>  ç±»ï¼Œæšä¸¾ï¼Œtypedefå’Œç±»å‹å‚æ•°åº”è¯¥å°†æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ï¼ˆåŒ…æ‹¬ç¬¬ä¸€ä¸ªå•è¯ï¼‰å¹¶ä¸”ä¸ä½¿ç”¨ä»»ä½•åˆ†éš”ç¬¦

```dart
class SliderMenu { ... }

class HttpRequest { ... }

typedef Predicate<T> = bool Function(T value);
```
> å½“ç±»è¢«ç”¨æ¥ä½œä¸ºå…ƒæ•°æ®æ³¨è§£æ—¶ä¹Ÿä½¿ç”¨*å¤§å†™é©¼å³°å‘½å*
```dart
    class Foo {
        const Foo([arg]);
    }

    @Foo(anArg)
    class A { ... }
    
    @Foo()
    class B { ... }
```

> å½“æ³¨è§£ç±»çš„æ„é€ å‡½æ•°ä¸éœ€è¦å‚æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨*å°å†™é©¼å³°å‘½å*çš„å¸¸é‡ä»£æ›¿
```dart
const foo = Foo();

@foo
class C { ... }
```



**[â¬† back to top](#top)**